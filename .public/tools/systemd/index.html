<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.86.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>systemd &middot; GNU/Linux Toolkit</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://www.linux-toolkit.com/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://www.linux-toolkit.com/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://www.linux-toolkit.com/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://www.linux-toolkit.com/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://www.linux-toolkit.com/"><h1>GNU/Linux Toolkit</h1></a>
      <p class="lead">
       Consise command line refreshers 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://www.linux-toolkit.com/">Home</a> </li>
        <li><a href="/tools/"> Tools </a></li>
      </ul>
    </nav>

    <p>&copy; 2021. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>systemd</h1>
  <time datetime=2021-07-10T11:53:31-0400 class="post-date">Sat, Jul 10, 2021</time>

  

  

  <p><code>systemd</code> is the first process run on boot and acts as the manager for all
running services (programs which run in the background). The main configuration
entities of <code>systemd</code> are simply called &ldquo;units&rdquo;, of which there are 11 different
types. The most commonly used unit is the service unit, which are described
individually in .service files. There are several commands for tapping into the features
of systemd, including <code>systemctl</code> and <code>journalctl</code>, as well as special syntaxes for
customizing each of the types of unit files.</p>
<h2 id="most-common-usages">Most Common Usages</h2>
<p><em><code>systemd</code> is hardly ever invoked directly, but instead called by the system.
<code>systemctl</code> and<code>journalctl</code> provide entry points.</em></p>
<h3 id="systemctl">systemctl</h3>
<p>List all the running units</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">systemctl
</code></pre></div><p>Start/stop/restart a service <em>(where sshd is an example service name)</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">systemctl start sshd
systemctl stop sshd
systemctl restart sshd
</code></pre></div><p>Check the status of a service</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">systemctl status sshd
</code></pre></div><p>Enable/disable a service to start on system boot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">systemctl enable sshd
systemctl disable sshd
</code></pre></div><h3 id="journalctl">journalctl</h3>
<p>Watch a live feed of systemd logs</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">journalctl -f
</code></pre></div><p>Get the logs of a single service</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo journalctl -u sshd
</code></pre></div><h2 id="configuration">Configuration</h2>
<p>Creating a custom service</p>
<p>A new .service file should be created like so in one of these directories.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">/etc/systemd/system/new_service.service 
<span style="color:#75715e"># sudo systemctl start new_service</span>
~/.config/systemd/user/new_service.service 
<span style="color:#75715e"># systemctl --user start new_service</span>
</code></pre></div><p><em>Symlinked</em> files placed elsewhere will not work with the <code>systemctl enable</code>
command and therefore won&rsquo;t be able to be triggered on system startup.
<br>
Here&rsquo;s a simple example.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[Unit]</span>
<span style="color:#a6e22e">Description</span><span style="color:#f92672">=</span><span style="color:#e6db74">A New Service</span>

<span style="color:#66d9ef">[Service]</span>
<span style="color:#a6e22e">Type</span><span style="color:#f92672">=</span><span style="color:#e6db74">simple</span>
<span style="color:#a6e22e">Environment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ONE=one&#34;</span>
<span style="color:#a6e22e">ExecStart</span><span style="color:#f92672">=</span><span style="color:#e6db74">/home/user/background-script.sh $ONE</span>

<span style="color:#66d9ef">[Install]</span>
<span style="color:#a6e22e">WantedBy</span><span style="color:#f92672">=</span><span style="color:#e6db74">mutli-user.target</span>
</code></pre></div><p>Note: [Install] is required for systemctl enable
<br>
Use <code>man systemd.service</code> to see all the types and options.
There are certain options such as ExecStartPre, ExecStartPost, ExecReload, etc.
which provide additional command triggers.</p>

</div>


    </main>


    
      
    
  </body>
</html>
